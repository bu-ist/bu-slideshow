jQuery(document).ready(function(c){"function"!==typeof BuModal&&(window.BuModal=function b(a){if(!(this instanceof b))throw new ReferenceError('Constructor was called as ordinary function. Use "new" operator.');if(!a.el)throw new TypeError("Could not identify modal element.");var d=c(a.el);d.wrap('<div class="bu_modal" style="display:none;"></div>');d.before('<div class="postboxheader"><a class="close_btn" href="">X</a></div>');this.ui=d.parent(".bu_modal");this.beforeOpen=a.beforeOpen?a.beforeOpen: function(){};this.afterOpen=a.afterOpen?a.afterOpen:function(){};this.beforeClose=a.beforeClose?a.beforeClose:function(){};this.afterClose=a.afterClose?a.afterClose:function(){};this.init();this.bindHandlers()},BuModal.prototype.init=function(){this.closeButton=this.ui.find(".close_btn");this.ui.bg=c('<div class="bu_modal_bg"></div>').insertBefore(this.ui).hide();this.ui.hide()},BuModal.prototype.isOpen=!1,BuModal.prototype.bindHandlers=function(){var b=this;c(document).on("keyup",function(a){b.isOpen&& 27===a.which&&b.close()});b.ui.bg.on("click",function(){b.close();return!1});b.closeButton.on("click",function(){b.close();return!1})},BuModal.prototype.open=function(){var b,a;this.beforeOpen();this.ui.bg.show();this.ui.addClass("bu_modal").show();b=this.ui.outerWidth();a=this.ui.outerHeight();b=parseInt(b/2);parseInt(a/2);this.ui.css({marginLeft:"-"+b+"px"});this.isOpen=!0;this.afterOpen()},BuModal.prototype.close=function(){this.beforeClose();this.ui.removeClass("bu_modal").hide();this.ui.bg.hide(); this.isOpen=!1;this.afterClose()})});