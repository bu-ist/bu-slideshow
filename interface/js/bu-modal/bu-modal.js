jQuery(document).ready(function(c){window.BuModal=function b(a){if(!(this instanceof b))return new b(a);this.beforeOpen=a.beforeOpen?a.beforeOpen:function(){};this.afterOpen=a.afterOpen?a.afterOpen:function(){};this.beforeLoad=a.beforeLoad?a.beforeLoad:function(){};this.afterLoad=a.afterLoad?a.afterLoad:function(){};this.beforeClose=a.beforeClose?a.beforeClose:function(){};this.afterClose=a.afterClose?a.afterClose:function(){};this.buttons=a.buttons?c(a.buttons):c();this.background=a.background?a.background:
"#ffffff";this.el=a.el?c(a.el):c("<div>").appendTo(document.body);this.content_url=a.content_url?a.content_url:"";this.width=a.width?a.width:"fit-content";this.height=a.width?a.height:"fit-content";this.ui=this.el.parents(".bu_modal");this.ui.length||(this.el.wrap('<div class="bu_modal" style="display:none;"></div>'),this.el.before('<div class="postboxheader"><a class="close_btn" href="">X</a></div>'),this.ui=this.el.parents(".bu_modal"));this.background&&this.ui.css("background",this.background);
this.init();this.bindHandlers()};BuModal.version=1.4;BuModal.bg=c('<div class="bu_modal_bg"></div>').prependTo(document.getElementsByTagName("body")[0]).hide();BuModal.active_modal=!1;BuModal.close=function(){BuModal.active_modal&&BuModal.active_modal.close()};BuModal.prototype.init=function(){var b=this;b.closeButton=this.ui.find(".close_btn");b.ui.bg=BuModal.bg;b.ui.hide();b.buttons.each(function(){c(this).click(function(){b.open()})})};BuModal.prototype.isOpen=!1;BuModal.prototype.bindHandlers=
function(){var b=this;c(document).bind("keyup",function(a){b.isOpen&&27===a.which&&b.close()});b.ui.bg.bind("click",function(){b.close();return!1});b.closeButton.bind("click",function(){b.close();return!1})};BuModal.prototype.open=function(){var b,a,d=this;this.ui.css({width:this.width,height:this.height});this.beforeOpen();this.el.show();this.ui.bg.show();this.ui.addClass("active").show();b=this.ui.outerWidth();a=this.ui.outerHeight();b=parseInt(b/2);parseInt(a/2);this.ui.css({marginLeft:"-"+b+"px",
marginRight:b+"px"});this.isOpen=!0;BuModal.active_modal=this;this.afterOpen();this.content_url&&(this.beforeLoad(),this.ui.addClass("loading_content"),this.xhr=c.get(this.content_url,function(a){var b=d.xhr.getResponseHeader("Content-Type");d.xhr=!1;"text/html"==b.split(";")[0]?d.el.html(a):d.el.text(a);d.ui.removeClass("loading_content");d.afterLoad()}))};BuModal.prototype.close=function(){this.beforeClose();this.xhr&&(this.xhr.abort(),this.xhr=!1);this.ui.removeClass("active").hide();this.ui.bg.hide();
this.isOpen=!1;BuModal.active_modal=!1;this.afterClose()}});
