(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,n=window.wp.i18n,r=window.wp.components,l=window.wp.apiFetch;var o=e.n(l);const a=window.wp.element,i=window.wp.blockEditor;function c(e,t,n,r,l,o,a){try{var i=e[o](a),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,l)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,l){var o=e.apply(t,n);function a(e){c(o,r,l,a,i,"next",e)}function i(e){c(o,r,l,a,i,"throw",e)}a(void 0)}))}}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,o=[],_n=!0,a=!1;try{for(n=n.call(e);!(_n=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);_n=!0);}catch(e){a=!0,l=e}finally{try{_n||null==n.return||n.return()}finally{if(a)throw l}}return o}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(0,t.registerBlockType)("bu-slideshow/slideshow-block",{apiVersion:2,title:"Slideshow Block",icon:"slides",category:"widgets",attributes:{slideshowId:{type:"string",default:"0"},transition:{type:"string",default:"slide"},showNav:{type:"boolean",default:!0},navStyle:{type:"string",default:"icon"},autoPlay:{type:"boolean",default:!0},shuffle:{type:"boolean",default:!1},width:{type:"string",default:"auto"},delay:{type:"string",default:"5"}},edit:function(e){var t=e.attributes,l=e.isSelected,c=e.setAttributes,h=s((0,a.useState)(),2),w=h[0],b=h[1],m=s((0,a.useState)(""),2),v=m[0],p=m[1];(0,a.useEffect)((function(){y()}),[]);var y=function(){var e=u(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o()({path:"bu-slideshow/v1/shows"});case 2:t=e.sent,b(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){_()}),[t]);var g,_=function(){var e=u(regeneratorRuntime.mark((function e(){var r,l,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==Number(t.slideshowId)){e.next=3;break}return p("<p>".concat((0,n.__)("Please select a slideshow."),"</p>")),e.abrupt("return");case 3:return r=Object.keys(t).map((function(e){return e+"="+t[e]})).join("&"),e.next=6,o()({path:"bu-slideshow/v1/markup?".concat(r)});case 6:l=e.sent,(a=document.createElement("div")).innerHTML=l,i=a.getElementsByClassName("slide")[0],p(i.innerHTML);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=w?w.map((function(e){return{label:e.name,value:e.id}})):[],k=(E=[{label:"Select a slideshow",value:0}].concat((g=E,function(e){if(Array.isArray(e))return f(e)}(g)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(g)||d(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))).find((function(e){return e.value===Number(t.slideshowId)}));return k||(k=E[0]),React.createElement("div",{className:"wp-block-bu-slideshow-slideshow-block"},React.createElement("div",null,0===Number(t.slideshowId)||l?React.createElement(r.SelectControl,{label:(0,n.__)("Choose a slideshow","slideshow-block"),value:t.slideshowId,onChange:function(e){return c({slideshowId:e})},options:E}):React.createElement("div",{style:{fontSize:15,fontWeigh:600}},React.createElement("i",null,"Preview: ",k.label))),React.createElement(i.InspectorControls,null,React.createElement(r.PanelBody,{title:(0,n.__)("Slideshow Options","slideshow-block")},React.createElement("div",null,React.createElement(r.SelectControl,{label:(0,n.__)("Transition","slideshow-block"),value:t.transition,onChange:function(e){return c({transition:e})},options:[{label:(0,n.__)("Slide","slideshow-block"),value:"slide"},{label:(0,n.__)("Fade","slideshow-block"),value:"fade"}]})),React.createElement("div",null,React.createElement(r.ToggleControl,{label:(0,n.__)("Show navigation","slideshow-block"),checked:t.showNav,onChange:function(e){return c({showNav:e})}})),React.createElement("div",null,React.createElement(r.SelectControl,{label:(0,n.__)("Navigation Style","slideshow-block"),value:t.navStyle,onChange:function(e){return c({navStyle:e})},options:[{label:(0,n.__)("Icon","slideshow-block"),value:"icon"},{label:(0,n.__)("Number","slideshow-block"),value:"number"}]})),React.createElement("div",null,React.createElement(r.ToggleControl,{label:(0,n.__)("Play automatically","slideshow-block"),checked:t.autoPlay,onChange:function(e){return c({autoPlay:e})}})),React.createElement("div",null,React.createElement(r.ToggleControl,{label:(0,n.__)("Shuffle slides","slideshow-block"),checked:t.shuffle,onChange:function(e){return c({shuffle:e})}})),React.createElement("div",null,React.createElement(r.TextControl,{label:(0,n.__)("Fixed width px (optional)","slideshow-block"),value:"auto"===t.width?"":t.width,onChange:function(e){return c({width:""===e?"auto":e})}})),React.createElement("div",null,React.createElement(r.TextControl,{label:(0,n.__)("Transition delay in seconds","slideshow-block"),value:t.delay,onChange:function(e){return c({delay:e})}})))),React.createElement("div",{dangerouslySetInnerHTML:{__html:v}}))},save:function(){return null}})})();